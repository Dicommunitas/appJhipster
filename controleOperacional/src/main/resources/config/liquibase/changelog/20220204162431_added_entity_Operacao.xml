<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!--
        Added the entity Operacao.
    -->
    <changeSet id="20220204162431-1" author="jhipster">
        <createTable tableName="operacao" remarks="Entidade Operação.\n@author Diego.\nAo criar uma Operação deve existir\numa opção de usar operações passadas\ncomo modelo para sua criação, inclusive\ncopiando o plano de amostragem">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="descricao" type="varchar(255)" remarks="Atributo descrição.\nDeve existir algum tipo de indicação\nque mostre a quantidade de amostras\nsuficiente ou insuficiente para a operação.\nDeve existir uma visualização em lista\nde todas as amostras pertencentes a operação\nna sua tela de visualização\nDeve existir um recurso para facilitar\na conferência do plano de amostragem\ndurante a criação da operação/plano de\namostragem.">
                <constraints nullable="false" />
            </column>
            <column name="volume" type="integer">
                <constraints nullable="false" />
            </column>
            <column name="inicio" type="${datetimeType}">
                <constraints nullable="true" />
            </column>
            <column name="fim" type="${datetimeType}">
                <constraints nullable="true" />
            </column>
            <column name="quantidade_amostras" type="integer" remarks="Atributo quantidadeAmostras mostra\nquantas amostras devem fazer parte da operação.\nFoco em cumprir o plano de amostragem.\nUma possível solução seria um botão\npara criar novas operações usando\noperações passadas como modelo, outra\nsolução mais elaborada seria existir\nvários planos de amostragem já\ncadastrados, esses planos teriam um nome\ne uma lista de amostras, assim sempre\nque uma operação selecionar este plano\nnovas amostras seriam criadas, usando\na lista do plano de amostragem como\nmodelo.\nOutra alternativa seria usar o lembrete como guia.">
                <constraints nullable="false" />
            </column>
            <column name="observacao" type="varchar(255)">
                <constraints nullable="true" />
            </column>
            <column name="tipo_operacao_id" type="bigint">
                <constraints nullable="false" />
            </column>
            <!-- jhipster-needle-liquibase-add-column - JHipster will add columns here -->
        </createTable>
        <dropDefaultValue tableName="operacao" columnName="inicio" columnDataType="${datetimeType}"/>
        <dropDefaultValue tableName="operacao" columnName="fim" columnDataType="${datetimeType}"/>
    </changeSet>

    <!-- jhipster-needle-liquibase-add-changeset - JHipster will add changesets here -->

    <!--
        Load sample data generated with Faker.js
        - This data can be easily edited using a CSV editor (or even MS Excel) and
          is located in the 'src/main/resources/config/liquibase/fake-data' directory
        - By default this data is applied when running with the JHipster 'dev' profile.
          This can be customized by adding or removing 'faker' in the 'spring.liquibase.contexts'
          Spring Boot configuration key.
    -->
    <changeSet id="20220204162431-1-data" author="jhipster" context="faker">
        <loadData
                  file="config/liquibase/fake-data/operacao.csv"
                  separator=";"
                  tableName="operacao"
                  usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="descricao" type="string"/>
            <column name="volume" type="numeric"/>
            <column name="inicio" type="date"/>
            <column name="fim" type="date"/>
            <column name="quantidade_amostras" type="numeric"/>
            <column name="observacao" type="string"/>
            <column name="tipo_operacao_id" type="numeric"/>
            <!-- jhipster-needle-liquibase-add-loadcolumn - JHipster (and/or extensions) can add load columns here -->
        </loadData>
    </changeSet>
</databaseChangeLog>
